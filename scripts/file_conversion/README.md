# LAMMPS-XYZ Converter Tools

A collection of Python scripts for converting molecular structure files between XYZ and LAMMPS data formats. These tools are useful for molecular dynamics simulations and computational chemistry workflows.

## Scripts Overview

### 1. `xyz_to_lmp.py` - XYZ to LAMMPS Converter
Converts molecular structure files from XYZ format to LAMMPS data format.

### 2. `data_to_xyz.py` - LAMMPS to XYZ Converter  
Converts LAMMPS data files back to XYZ format with optional lattice information.

## Requirements

- Python 3.6+
- pymatgen library (for XYZ to LAMMPS conversion)

```bash
pip install pymatgen
```

## Installation

1. Clone or download the scripts
2. Ensure Python 3.6+ is installed
3. Install required dependencies:
   ```bash
   pip install pymatgen
   ```

## Usage

### XYZ to LAMMPS Conversion

Convert an XYZ file to LAMMPS data format:

```bash
python convert_xyz_to_lmp.py input.xyz
```

**Features:**
- Automatically detects lattice vectors from XYZ comment line
- Generates appropriate box dimensions (periodic or molecular)
- Assigns atomic masses based on element types
- Creates proper LAMMPS data file format

**Input XYZ Format:**
```
12
Lattice="10.0 0.0 0.0 0.0 10.0 0.0 0.0 0.0 10.0"
Si    0.000000    0.000000    0.000000
Si    2.500000    2.500000    0.000000
...
```

**Output:** Creates `input.lmp` with LAMMPS data format

### LAMMPS to XYZ Conversion

Convert a LAMMPS data file to XYZ format:

```bash
python data_to_xyz.py input.data [output.xyz] [--lattice]
```

**Arguments:**
- `input.data`: LAMMPS data file to convert (required)
- `output.xyz`: Output filename (optional, defaults to `input.xyz`)
- `--lattice`: Include lattice information in XYZ comment line (optional)

**Examples:**
```bash
# Basic conversion
python data_to_xyz.py structure.data

# Specify output filename
python data_to_xyz.py structure.data converted.xyz

# Include lattice information
python data_to_xyz.py structure.data --lattice

# Both custom filename and lattice
python data_to_xyz.py structure.data converted.xyz --lattice
```

## File Format Details

### XYZ Format
```
<number of atoms>
<comment line, optionally with Lattice="...">
<element> <x> <y> <z>
<element> <x> <y> <z>
...
```

### LAMMPS Data Format
```
LAMMPS data file generated by script

<N> atoms
<M> atom types

<xlo> <xhi> xlo xhi
<ylo> <yhi> ylo yhi
<zlo> <zhi> zlo zhi

Masses

<type> <mass>
...

Atoms # atomic

<id> <type> <x> <y> <z>
...
```

## Features

### XYZ to LAMMPS (`convert_xyz_to_lmp.py`)
- **Lattice Detection**: Automatically extracts lattice vectors from XYZ comment lines
- **Box Sizing**: Creates periodic boxes from lattice or molecular bounds with padding
- **Element Recognition**: Uses pymatgen for accurate atomic masses
- **Format Compliance**: Generates standard LAMMPS data format

### LAMMPS to XYZ (`data_to_xyz.py`)
- **Mass-to-Element Mapping**: Converts atomic masses back to element symbols
- **Lattice Preservation**: Optionally includes box dimensions in XYZ format
- **Triclinic Support**: Handles both orthogonal and triclinic simulation boxes
- **Error Handling**: Robust parsing with informative error messages

## Supported Elements

The LAMMPS to XYZ converter recognizes common elements up to Krypton (Kr) based on atomic mass. For unknown masses, it generates placeholder symbols (e.g., `X28` for mass ~28).

Common supported elements:
- H, He, Li, Be, B, C, N, O, F, Ne
- Na, Mg, Al, Si, P, S, Cl, Ar, K, Ca
- Sc, Ti, V, Cr, Mn, Fe, Co, Ni, Cu, Zn
- Ga, Ge, As, Se, Br, Kr

## Error Handling

Both scripts include comprehensive error handling:
- File existence validation
- Format validation
- Graceful handling of malformed files
- Informative error messages

## Examples

### Converting a Silicon Crystal
```bash
# XYZ file: si_crystal.xyz
python convert_xyz_to_lmp.py si_crystal.xyz
# Creates: si_crystal.lmp

# Convert back with lattice info
python data_to_xyz.py si_crystal.lmp si_converted.xyz --lattice
```

### Batch Processing
```bash
# Convert multiple XYZ files
for file in *.xyz; do
    python convert_xyz_to_lmp.py "$file"
done

# Convert multiple LAMMPS data files
for file in *.data; do
    python data_to_xyz.py "$file" --lattice
done
```

## Limitations

- XYZ to LAMMPS conversion requires pymatgen library
- Element recognition in LAMMPS to XYZ conversion is based on approximate mass matching
- Only supports atomic coordinates (no bonds, angles, or other topology)
- Assumes atomic-style LAMMPS data format

## Contributing

Feel free to submit issues or pull requests for improvements, additional features, or bug fixes.

